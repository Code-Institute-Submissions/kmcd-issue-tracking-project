{% extends 'base.html' %} {% block page_title %}User Page{% endblock %} {% block content %}

<main>


    <!-- Show Issues as per the Issue & Status & Client (if applicable) Filters -->

    <!-- On the first load of this page, the details are passed in from the 
         'userhome' view. When the user filters by Issue, Status, Client, the
          js in base.html is triggered, and it filters and re-displays the
          data -->

    <div class="row no-gutters">
        <div class="table-responsive-md">

            <table class="table table-striped table-style">
                <thead>
                    <tr>
                        <th scope="col" class="text-center td-date">Date</th>
                        <th scope="col" class="text-center td-username">Assigned to</th>
                        <th scope="col" class="d-md-table-cell text-center td-sw-comp">Software Component</th>
                        <th scope="col" class="d-md-table-cell text-center td-priority">Paid</th>
                        <th scope="col" class="text-center td-summary">Feature Summary</th>
                        <th scope="col" class="text-center td-status">Status</th>
                        <th scope="col" class="text-center td-more"><i class="fas fa-ellipsis-h more-icon-th"></th>
                    </tr>
                </thead>
               
               <!-- On initial load, the table details will be retrieved via 
                    the 'user_home' view and displayed via userhome.html. 
                    When the user filters the issues, it will trigger the 
                    javascript 'on click' functions in base.html which will 
                    call the 'get_issues' view, return the details to the js
                    function, which will clear the table and output the new
                    details to it. -->
                    
                <tbody>
                     {% for feature in features %}
                    <tr>
                        <td class="d-md-table-cell td-date">{{ feature.input_date|date:"d M y" }}</td>
                        
                        <!-- The issue can be assigned to a user on the client side, and a user on the vendor side. 
                             Show the relevant assigned user depending on whether the logged in user is on the client side
                             or the vendor side -->
                        
                        {% if userdetails.user_type == "V"%}
                        
                        <td class="d-md-table-cell td-username">{{ feature.assigned_to }}</td>
                        
                        {% endif %}
                        
                        <td class="d-md-table-cell td-sw-comp">{{ feature.software_component }}</td>
                        <td class="text-center td-priority">{{ feature.paid }}</td>
                        <td class="td-summary">{{ feature.summary }}</td>
                        <td class="text-center td-status">{{ feature.status }}</td>
                        <td class="text-center td-more more-icon-cell "><a class="more-icon-style" href='{% url 'issue_details' feature.id %}' ><i class="fas fa-ellipsis-h more-icon-style"></i></a>
                            </td>
                    </tr>
                    {% endfor %}
                    </tbody>
            </table>
        </div>
    </div>

</main>


{% endblock %}
